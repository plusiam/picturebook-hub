<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê·¸ë¦¼ì±… ìˆ˜ì—… í—ˆë¸Œ</title>
    <style>
        /* ============ CSS ìŠ¤íƒ€ì¼ ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #48bb78;
            --warning: #f6ad55;
            --danger: #f56565;
            --light: #f7fafc;
            --dark: #2d3748;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* í—¤ë” */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        /* ê²€ìƒ‰ ë° í•„í„° */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-tag {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-tag:hover {
            background: #e0e0e0;
        }

        .filter-tag.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* í†µê³„ ì •ë³´ */
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        /* ê·¸ë¦¼ì±… ê·¸ë¦¬ë“œ */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .book-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .book-cover {
            height: 180px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .book-cover-emoji {
            font-size: 4rem;
            opacity: 0.9;
        }

        .book-info {
            padding: 20px;
        }

        .book-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .book-author {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }

        .book-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }

        .tag {
            background: #f0f0f0;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            color: #666;
        }

        .book-actions {
            display: flex;
            gap: 10px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            background: transparent;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 1000px;
            margin: 30px auto;
            border-radius: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            border-radius: 20px 20px 0 0;
            position: relative;
        }

        .modal-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .modal-body {
            padding: 30px;
        }

        .activity-section {
            margin-bottom: 35px;
        }

        .activity-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .activity-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .activity-content h4 {
            color: #555;
            margin-bottom: 10px;
        }

        .question-box {
            background: white;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .question-type {
            font-size: 0.85rem;
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .worksheet-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--success), #38a169);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            margin-top: 15px;
        }

        .worksheet-btn:hover {
            transform: translateY(-2px);
        }

        /* ì¶”ê°€ ë²„íŠ¼ */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
        }

        .fab-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .fab-btn:hover {
            transform: scale(1.1);
        }

        .fab-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            display: none;
        }

        .fab-menu.active {
            display: block;
        }

        .fab-menu-item {
            display: block;
            width: 200px;
            padding: 12px 20px;
            background: white;
            border: none;
            text-align: left;
            margin-bottom: 5px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            cursor: pointer;
        }

        .fab-menu-item:hover {
            background: #f0f0f0;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .stats {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* í”„ë¦°íŠ¸ ìŠ¤íƒ€ì¼ */
        @media print {
            .controls, .fab, .book-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ“š ê·¸ë¦¼ì±… ìˆ˜ì—… í—ˆë¸Œ</h1>
            <p>ì½ê¸° ì „ Â· ì½ê¸° ì¤‘ Â· ì½ê¸° í›„ í™œë™ìœ¼ë¡œ êµ¬ì„±ëœ ì²´ê³„ì ì¸ ê·¸ë¦¼ì±… ìˆ˜ì—…</p>
        </div>

        <!-- í†µê³„ -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalBooks">0</div>
                <div class="stat-label">ì¤€ë¹„ëœ ê·¸ë¦¼ì±…</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalTags">0</div>
                <div class="stat-label">ë‹¤ì–‘í•œ ì£¼ì œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalActivities">0</div>
                <div class="stat-label">ì¦ê±°ìš´ í™œë™</div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ ë° í•„í„° -->
        <div class="controls">
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="ê·¸ë¦¼ì±… ì œëª©, ì‘ê°€, ì£¼ì œë¡œ ê²€ìƒ‰...">
                <button class="btn" onclick="searchBooks()">ğŸ” ê²€ìƒ‰</button>
                <button class="btn" onclick="resetFilter()">â†º ì´ˆê¸°í™”</button>
            </div>
            <div class="filter-tags" id="filterTags">
                <!-- íƒœê·¸ í•„í„°ê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
        </div>

        <!-- ê·¸ë¦¼ì±… ê·¸ë¦¬ë“œ -->
        <div class="books-grid" id="booksGrid">
            <!-- ê·¸ë¦¼ì±… ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
    </div>

    <!-- ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal" id="bookModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-btn" onclick="closeModal()">&times;</button>
                <h2 id="modalTitle">ê·¸ë¦¼ì±… ì œëª©</h2>
                <p id="modalAuthor">ì‘ê°€</p>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- í™œë™ ë‚´ìš©ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
        </div>
    </div>

    <!-- í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ -->
    <div class="fab">
        <div class="fab-menu" id="fabMenu">
            <button class="fab-menu-item" onclick="addNewBook()">ğŸ“– ìƒˆ ê·¸ë¦¼ì±… ì¶”ê°€</button>
            <button class="fab-menu-item" onclick="exportData()">ğŸ’¾ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
            <button class="fab-menu-item" onclick="printView()">ğŸ–¨ï¸ ì¸ì‡„ìš© ë³´ê¸°</button>
            <button class="fab-menu-item" onclick="openGitHub()">ğŸ’¬ í”¼ë“œë°± ë‚¨ê¸°ê¸°</button>
        </div>
        <button class="fab-btn" onclick="toggleFabMenu()">+</button>
    </div>

    <script>
        // ============ ë°ì´í„°ë² ì´ìŠ¤ ============
        const booksData = [
            {
                id: 1,
                title: "ë¬´ì§€ê°œ ë¬¼ê³ ê¸°",
                author: "ë§ˆë¥´ì¿ ìŠ¤ í”¼ìŠ¤í„°",
                emoji: "ğŸ ",
                tags: ["ìš°ì •", "ë‚˜ëˆ”", "ìì•„ì„±ì°°"],
                grade: ["1-2í•™ë…„", "3-4í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ë°˜ì§ì´ëŠ” ë¹„ëŠ˜ì„ ê°€ì§„ ë¬¼ê³ ê¸°ê°€ ìˆì—ˆì–´ìš”. ì¹œêµ¬ë“¤ì´ ë¶€ëŸ¬ì›Œí•˜ì§€ë§Œ í˜¼ìì¸ ì´ ë¬¼ê³ ê¸°ëŠ” ì–´ë–¤ ê³ ë¯¼ì„ í•˜ê³  ìˆì„ê¹Œìš”?",
                        prediction: [
                            "í‘œì§€ì˜ ë°˜ì§ì´ëŠ” ë¬¼ê³ ê¸°ë¥¼ ë³´ë©° ì´ì•¼ê¸° ì˜ˆìƒí•˜ê¸°",
                            "ì œëª©ì˜ 'ë¬´ì§€ê°œ'ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ ìƒê°í•´ë³´ê¸°",
                            "ë¬¼ê³ ê¸°ì˜ í‘œì •ì—ì„œ ê°ì • ì½ì–´ë‚´ê¸°"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ë¬´ì§€ê°œ ë¬¼ê³ ê¸°ì˜ ë¹„ëŠ˜ì€ ì–´ë–¤ íŠ¹ì§•ì´ ìˆë‚˜ìš”?",
                            "ë‹¤ë¥¸ ë¬¼ê³ ê¸°ë“¤ì€ ì™œ ë¬´ì§€ê°œ ë¬¼ê³ ê¸°ë¥¼ í”¼í•˜ê²Œ ë˜ì—ˆë‚˜ìš”?",
                            "ë¬¸ì–´ í• ë¨¸ë‹ˆëŠ” ë¬´ì§€ê°œ ë¬¼ê³ ê¸°ì—ê²Œ ì–´ë–¤ ì¡°ì–¸ì„ í–ˆë‚˜ìš”?"
                        ],
                        interaction: [
                            "ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ ë¬´ì§€ê°œ ë¬¼ê³ ê¸°ë¼ë©´ ì–´ë–¤ ì„ íƒì„ í–ˆì„ê¹Œìš”?",
                            "ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ„ì—ˆë˜ íŠ¹ë³„í•œ ê²½í—˜ì´ ìˆë‚˜ìš”?",
                            "í˜¼ì íŠ¹ë³„í•œ ê²ƒì„ ê°€ì§€ê³  ìˆì„ ë•Œì™€ í•¨ê»˜ ë‚˜ëˆŒ ë•Œì˜ ê¸°ë¶„ì€ ì–´ë–»ê²Œ ë‹¤ë¥¼ê¹Œìš”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì§„ì •í•œ ì•„ë¦„ë‹¤ì›€ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ë‚˜ëˆ”ì´ ìš°ë¦¬ ì‚¶ì— ê°€ì ¸ë‹¤ì£¼ëŠ” ë³€í™”ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
                            "ë‚´ê°€ ê°€ì§„ ê²ƒ ì¤‘ ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?"
                        ],
                        worksheetUrl: "https://forms.gle/example1"  // Google Forms ë§í¬ë¡œ êµì²´
                    }
                }
            },
            {
                id: 2,
                title: "ê´œì°®ì•„",
                author: "ìµœìˆ™í¬",
                emoji: "ğŸ¤—",
                tags: ["ìœ„ë¡œ", "ê³µê°", "ì„±ì¥"],
                grade: ["1-2í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ë„˜ì–´ì§„ ì•„ì´, ì‹¤ìˆ˜í•œ ì•„ì´, í˜¼ìì¸ ì•„ì´... ëª¨ë‘ì—ê²Œ í•„ìš”í•œ í•œ ë§ˆë””ê°€ ìˆë‹¤ë©´ ë¬´ì—‡ì¼ê¹Œìš”?",
                        prediction: [
                            "í‘œì§€ ì† ì•„ì´ì˜ í‘œì •ê³¼ ìì„¸ ê´€ì°°í•˜ê¸°",
                            "'ê´œì°®ì•„'ë¼ëŠ” ë§ì´ ì£¼ëŠ” ëŠë‚Œ ë‚˜ëˆ„ê¸°",
                            "ëˆ„êµ°ê°€ì—ê²Œ ìœ„ë¡œë°›ì•˜ë˜ ê²½í—˜ ë– ì˜¬ë¦¬ê¸°"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ì´ì•¼ê¸° ì†ì— ë“±ì¥í•˜ëŠ” ì•„ì´ë“¤ì€ ì–´ë–¤ ìƒí™©ì— ìˆë‚˜ìš”?",
                            "ì–´ë¥¸ë“¤ì€ ì•„ì´ë“¤ì—ê²Œ ì–´ë–¤ ë§ì„ í•´ì£¼ë‚˜ìš”?",
                            "ì•„ì´ë“¤ì˜ í‘œì •ì€ ì–´ë–»ê²Œ ë³€í™”í•˜ë‚˜ìš”?"
                        ],
                        interaction: [
                            "'ê´œì°®ì•„'ë¼ëŠ” ë§ì„ ë“¤ì—ˆì„ ë•Œ ì–´ë–¤ ê¸°ë¶„ì´ ë“œë‚˜ìš”?",
                            "ì¹œêµ¬ê°€ í˜ë“¤ì–´í•  ë•Œ ì–´ë–»ê²Œ ìœ„ë¡œí•´ì£¼ë‚˜ìš”?",
                            "ì‹¤ìˆ˜í–ˆì„ ë•Œ ìì‹ ì—ê²Œ í•´ì£¼ê³  ì‹¶ì€ ë§ì€?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì‹¤ìˆ˜ì™€ ì‹¤íŒ¨ë¥¼ ëŒ€í•˜ëŠ” ìš°ë¦¬ì˜ ìì„¸ëŠ” ì–´ë– í•´ì•¼ í• ê¹Œìš”?",
                            "ë‚˜ ìì‹ ì„ ê²©ë ¤í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?",
                            "ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ í˜ì´ ë˜ëŠ” ë§ í•œë§ˆë””ë¥¼ ì „í•œë‹¤ë©´?"
                        ],
                        worksheetUrl: "https://forms.gle/example2"
                    }
                }
            },
            {
                id: 3,
                title: "ì•Œì‚¬íƒ•",
                author: "ë°±í¬ë‚˜",
                emoji: "ğŸ¬",
                tags: ["ì†Œí†µ", "ì´í•´", "ë§ˆë²•", "ê°€ì¡±"],
                grade: ["3-4í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ë§Œì•½ ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ˆìŒì„ ë“¤ì„ ìˆ˜ ìˆëŠ” ë§ˆë²• ì‚¬íƒ•ì´ ìˆë‹¤ë©´, ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?",
                        prediction: [
                            "ì œëª© 'ì•Œì‚¬íƒ•'ì˜ ì˜ë¯¸ ì¶”ì¸¡í•˜ê¸°",
                            "í‘œì§€ ì† êµ¬ìŠ¬ë“¤ì˜ ì •ì²´ ìƒìƒí•˜ê¸°",
                            "ë§ˆìŒì„ ì½ì„ ìˆ˜ ìˆë‹¤ë©´ ì¢‹ì€ ì ê³¼ ë‚˜ìœ ì  ìƒê°í•˜ê¸°"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ë™ë™ì´ëŠ” ì–´ë””ì„œ ì•Œì‚¬íƒ•ì„ ì–»ê²Œ ë˜ì—ˆë‚˜ìš”?",
                            "ì•Œì‚¬íƒ•ì„ ë¨¹ìœ¼ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ë‚˜ìš”?",
                            "ë™ë™ì´ê°€ ë“¤ì€ ë§ˆìŒì˜ ì†Œë¦¬ë“¤ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?"
                        ],
                        interaction: [
                            "ì•„ë¹ , ì—„ë§ˆ, ê°•ì•„ì§€ì˜ ì§„ì§œ ë§ˆìŒì„ ì•Œê²Œ ëœ ë™ë™ì´ì˜ ê¸°ë¶„ì€?",
                            "ë‚´ ë§ˆìŒì„ ë‹¤ë¥¸ ì‚¬ëŒì´ ì•Œê²Œ ëœë‹¤ë©´ ì–´ë–¨ê¹Œìš”?",
                            "ë§í•˜ì§€ ì•Šì•„ë„ ì•Œì•„ì£¼ì—ˆìœ¼ë©´ í•˜ëŠ” ë‚´ ë§ˆìŒì€?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ê²‰ìœ¼ë¡œ ë³´ì´ëŠ” ëª¨ìŠµê³¼ ì†ë§ˆìŒì´ ë‹¤ë¥¼ ë•Œê°€ ìˆë‚˜ìš”?",
                            "ì§„ì •í•œ ì†Œí†µì„ ìœ„í•´ í•„ìš”í•œ ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ì˜¤ëŠ˜ ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ì—ê²Œ ì „í•˜ê³  ì‹¶ì€ ë§ˆìŒì€?"
                        ],
                        worksheetUrl: "https://forms.gle/example3"
                    }
                }
            },
            {
                id: 4,
                title: "ì¹˜í‚¨ ë§ˆìŠ¤í¬",
                author: "ìš°ì“°ê¸° ë¯¸í˜¸",
                emoji: "ğŸ”",
                tags: ["ìš©ê¸°", "ìì‹ ê°", "ë³€í™”"],
                grade: ["1-2í•™ë…„", "3-4í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ì†Œì‹¬í•œ ì•„ì´ê°€ íŠ¹ë³„í•œ ê°€ë©´ì„ ì“°ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”? ê°€ë©´ì´ ì£¼ëŠ” í˜ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                        prediction: [
                            "í‘œì§€ì˜ ë‹­ ê°€ë©´ì´ ì£¼ëŠ” ëŠë‚Œ ì´ì•¼ê¸°í•˜ê¸°",
                            "ê°€ë©´ì„ ì“°ë©´ ë‹¬ë¼ì§€ëŠ” ê²ƒë“¤ ìƒìƒí•˜ê¸°",
                            "ë‚˜ì—ê²Œë„ í•„ìš”í•œ 'ë§ˆìŠ¤í¬'ê°€ ìˆì„ê¹Œ?"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ì£¼ì¸ê³µì€ ì™œ ì¹˜í‚¨ ë§ˆìŠ¤í¬ë¥¼ ì“°ê²Œ ë˜ì—ˆë‚˜ìš”?",
                            "ë§ˆìŠ¤í¬ë¥¼ ì“´ í›„ ì–´ë–¤ ë³€í™”ê°€ ìˆì—ˆë‚˜ìš”?",
                            "ê²°êµ­ ë§ˆìŠ¤í¬ ì—†ì´ë„ í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒì€?"
                        ],
                        interaction: [
                            "ìš©ê¸°ê°€ í•„ìš”í–ˆë˜ ìˆœê°„ì´ ìˆì—ˆë‚˜ìš”?",
                            "ë‚˜ë¥¼ ë” ê°•í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?",
                            "ì§„ì§œ ìš©ê¸°ë€ ë¬´ì—‡ì¼ê¹Œìš”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì™¸ë¶€ì˜ ë„ì›€ ì—†ì´ë„ ìš©ê¸°ë¥¼ ë‚¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì€?",
                            "ë‚˜ì˜ ìˆ¨ê²¨ì§„ ëŠ¥ë ¥ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ìì‹ ê°ì„ í‚¤ìš°ëŠ” ë‚˜ë§Œì˜ ë°©ë²• ë§Œë“¤ê¸°"
                        ],
                        worksheetUrl: "https://forms.gle/example4"
                    }
                }
            },
            {
                id: 5,
                title: "ì±…ë¨¹ëŠ” ì—¬ìš°",
                author: "í”„ë€ì¹˜ìŠ¤ì¹´ ë¹„ì–´ë§Œ",
                emoji: "ğŸ¦Š",
                tags: ["ë…ì„œ", "ì°½ì˜ì„±", "ë„ì „"],
                grade: ["3-4í•™ë…„", "5-6í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ì±…ì„ ì •ë§ë¡œ 'ë¨¹ëŠ”' ì—¬ìš°ê°€ ìˆë‹¤ë©´? ê·¸ ì—¬ìš°ì—ê²ŒëŠ” ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?",
                        prediction: [
                            "ì œëª©ì˜ 'ì±…ë¨¹ëŠ”'ì´ ì˜ë¯¸í•˜ëŠ” ê²ƒ ì¶”ì¸¡í•˜ê¸°",
                            "ì—¬ìš°ê°€ ì±…ì„ ë¨¹ëŠ” ì´ìœ  ìƒìƒí•˜ê¸°",
                            "ì±…ì„ ë¨¹ìœ¼ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œ?"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ì—¬ìš°ëŠ” ì–´ë–»ê²Œ ì±…ì„ ë¨¹ê²Œ ë˜ì—ˆë‚˜ìš”?",
                            "ì±…ì„ ë¨¹ì€ ì—¬ìš°ì—ê²Œ ì¼ì–´ë‚œ ë³€í™”ëŠ”?",
                            "ì—¬ìš°ê°€ ì§ì ‘ ì“´ ì´ì•¼ê¸°ëŠ” ì–´ë• ë‚˜ìš”?"
                        ],
                        interaction: [
                            "ì±…ì„ 'ë¨¹ëŠ”ë‹¤'ëŠ” ê²ƒì˜ ì§„ì§œ ì˜ë¯¸ëŠ”?",
                            "ë‚´ê°€ ê°€ì¥ 'ë§›ìˆê²Œ' ì½ì€ ì±…ì€?",
                            "ë‚˜ë„ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ê³  ì‹¶ì–´ì§„ ì ì´ ìˆë‚˜ìš”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ë…ì„œê°€ ìš°ë¦¬ì—ê²Œ ì£¼ëŠ” ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ì½ê¸°ì™€ ì“°ê¸°ì˜ ê´€ê³„ëŠ”?",
                            "ë‚˜ë§Œì˜ ì´ì•¼ê¸°ë¥¼ ë§Œë“ ë‹¤ë©´?"
                        ],
                        worksheetUrl: "https://forms.gle/example5"
                    }
                }
            },
            {
                id: 6,
                title: "ë‚˜ëŠ” ë‚˜ì˜ ì£¼ì¸",
                author: "ì±„ì¸ì„ ",
                emoji: "ğŸ‘‘",
                tags: ["ìì¡´ê°", "ì •ì²´ì„±", "ìš©ê¸°"],
                grade: ["5-6í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ë‚¨ë“¤ì´ ì •í•´ì¤€ ê¸¸ì´ ì•„ë‹Œ, ë‚´ê°€ ì„ íƒí•œ ë‚˜ë§Œì˜ ê¸¸ì„ ê°„ë‹¤ëŠ” ê²ƒì€ ì–´ë–¤ ì˜ë¯¸ì¼ê¹Œìš”?",
                        prediction: [
                            "'ë‚˜ì˜ ì£¼ì¸'ì´ ëœë‹¤ëŠ” ê²ƒì˜ ì˜ë¯¸",
                            "í‘œì§€ ì† ì¸ë¬¼ì˜ ë‹¹ë‹¹í•œ í‘œì • ê´€ì°°í•˜ê¸°",
                            "ìŠ¤ìŠ¤ë¡œ ê²°ì •í•œë‹¤ëŠ” ê²ƒì˜ ì¤‘ìš”ì„±"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ì£¼ì¸ê³µì€ ì–´ë–¤ ì„ íƒì˜ ìˆœê°„ë“¤ì„ ë§ì´í•˜ë‚˜ìš”?",
                            "ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ë°˜ì‘ì€ ì–´ë– í–ˆë‚˜ìš”?",
                            "ì£¼ì¸ê³µì´ ê¹¨ë‹¬ì€ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?"
                        ],
                        interaction: [
                            "ìŠ¤ìŠ¤ë¡œ ê²°ì •í–ˆì„ ë•Œì™€ ë‚¨ì´ ì •í•´ì¤¬ì„ ë•Œì˜ ì°¨ì´ëŠ”?",
                            "ë‚˜ë§Œì˜ ê°œì„±ê³¼ ì¥ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                            "ë‹¤ë¥¸ ì‚¬ëŒê³¼ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ ì£¼ëŠ” ì˜ë¯¸ëŠ”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì§„ì •í•œ ë‚˜ ìì‹ ì´ ëœë‹¤ëŠ” ê²ƒì€?",
                            "ë‚¨ê³¼ ë¹„êµí•˜ì§€ ì•Šê³  ë‚˜ë¥¼ ì‚¬ë‘í•˜ëŠ” ë°©ë²•ì€?",
                            "ë‚´ ì‚¶ì˜ ì£¼ì¸ê³µìœ¼ë¡œ ì‚´ì•„ê°€ê¸° ìœ„í•´ í•„ìš”í•œ ê²ƒì€?"
                        ],
                        worksheetUrl: "https://forms.gle/example6"
                    }
                }
            },
            {
                id: 7,
                title: "ë˜¥ì€ ì°¸ ëŒ€ë‹¨í•´!",
                author: "í›„ì§€íƒ€ ë…¸ë¦¬ì½”",
                emoji: "ğŸ’©",
                tags: ["ê³¼í•™", "ìœ ë¨¸", "ìì—°", "í™˜ê²½"],
                grade: ["1-2í•™ë…„", "3-4í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ëª¨ë“  ë™ë¬¼ì´ ëˆ„ëŠ” ë˜¥! ê·¸ëŸ°ë° ë˜¥ì´ ì™œ ëŒ€ë‹¨í• ê¹Œìš”? ë˜¥ì—ëŠ” ì–´ë–¤ ë¹„ë°€ì´ ìˆ¨ì–´ìˆì„ê¹Œìš”?",
                        prediction: [
                            "í‘œì§€ë¥¼ ë³´ê³  ë“±ì¥í•  ë™ë¬¼ë“¤ ì˜ˆìƒí•˜ê¸°",
                            "'ëŒ€ë‹¨í•˜ë‹¤'ëŠ” í‘œí˜„ì˜ ì˜ë¯¸ ìƒê°í•˜ê¸°",
                            "ë˜¥ì´ í•„ìš”í•œ ì´ìœ  ì¶”ì¸¡í•´ë³´ê¸°"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ë™ë¬¼ë§ˆë‹¤ ë˜¥ì˜ ëª¨ì–‘ì´ ë‹¤ë¥¸ ì´ìœ ëŠ”?",
                            "ë˜¥ì´ ìì—°ì—ì„œ í•˜ëŠ” ì—­í• ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                            "ì–´ë–¤ ë™ë¬¼ì˜ ë˜¥ì´ ê°€ì¥ íŠ¹ë³„í–ˆë‚˜ìš”?"
                        ],
                        interaction: [
                            "ê°€ì¥ ì‹ ê¸°í–ˆë˜ ë™ë¬¼ì˜ ë˜¥ì€?",
                            "ë˜¥ì´ ì—†ë‹¤ë©´ ì§€êµ¬ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?",
                            "ë™ë¬¼ë“¤ì˜ ë˜¥ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ì •ë³´ëŠ”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ìì—°ì˜ ìˆœí™˜ì—ì„œ ë˜¥ì˜ ì—­í• ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ìš°ë¦¬ê°€ ë²„ë¦¬ëŠ” ê²ƒë“¤ë„ ì“¸ëª¨ê°€ ìˆì„ê¹Œìš”?",
                            "í™˜ê²½ì„ ìœ„í•´ ìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ì¼ì€?"
                        ],
                        worksheetUrl: "https://forms.gle/example7"
                    }
                }
            },
            {
                id: 8,
                title: "ê³ ë§™ìŠµë‹ˆë‹¤, ì„ ìƒë‹˜",
                author: "íŒ¨íŠ¸ë¦¬ìƒ¤ í´ë¼ì½”",
                emoji: "ğŸ‘©â€ğŸ«",
                tags: ["ê°ì‚¬", "ì„±ì¥", "ë©˜í† ", "êµìœ¡"],
                grade: ["3-4í•™ë…„", "5-6í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "ì½ê¸°ë¥¼ ì–´ë ¤ì›Œí•˜ëŠ” í•œ ì•„ì´ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ì•„ì´ë¥¼ ë³€í™”ì‹œí‚¨ íŠ¹ë³„í•œ ì„ ìƒë‹˜ì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ë³¼ê¹Œìš”?",
                        prediction: [
                            "ì œëª©ì—ì„œ ëŠê»´ì§€ëŠ” ê°ì • ë‚˜ëˆ„ê¸°",
                            "ë‚˜ì—ê²Œ ê³ ë§ˆìš´ ì„ ìƒë‹˜ ë– ì˜¬ë¦¬ê¸°",
                            "ì„ ìƒë‹˜ì´ í•™ìƒì—ê²Œ ì¤„ ìˆ˜ ìˆëŠ” ê°€ì¥ í° ì„ ë¬¼ì€?"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ì£¼ì¸ê³µì€ ì–´ë–¤ ì–´ë ¤ì›€ì„ ê²ªê³  ìˆì—ˆë‚˜ìš”?",
                            "ì„ ìƒë‹˜ì€ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ë„ì›€ì„ ì£¼ì—ˆë‚˜ìš”?",
                            "ì£¼ì¸ê³µì—ê²Œ ì¼ì–´ë‚œ ë³€í™”ëŠ” ë¬´ì—‡ì¸ê°€ìš”?"
                        ],
                        interaction: [
                            "ì–´ë ¤ì›€ì„ ê·¹ë³µí•˜ëŠ”ë° ë„ì›€ì„ ì¤€ ì‚¬ëŒì´ ìˆë‚˜ìš”?",
                            "ëˆ„êµ°ê°€ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ì´í•´í•œë‹¤ëŠ” ê²ƒì€?",
                            "í¬ê¸°í•˜ì§€ ì•Šê³  ê³„ì† ë„ì „í•˜ëŠ” í˜ì€ ì–´ë””ì„œ ì˜¬ê¹Œìš”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì§„ì •í•œ ê°€ë¥´ì¹¨ì´ë€ ë¬´ì—‡ì¼ê¹Œìš”?",
                            "ê°ì‚¬ì˜ ë§ˆìŒì„ í‘œí˜„í•˜ëŠ” ë°©ë²•ì€?",
                            "ë‚˜ë„ ëˆ„êµ°ê°€ì—ê²Œ í˜ì´ ë˜ì–´ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?"
                        ],
                        worksheetUrl: "https://forms.gle/example8"
                    }
                }
            },
            {
                id: 9,
                title: "ë‚´ ì´ë¦„ì€ ìê°€ì£¼",
                author: "ë¥´ë„¤ ê³ ì‹œë‹ˆ",
                emoji: "ğŸ‘¦",
                tags: ["ëª¨í—˜", "ìš°ì •", "ìƒìƒë ¥"],
                grade: ["3-4í•™ë…„", "5-6í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "í‰ë²”í•œ ì¼ìƒë„ íŠ¹ë³„í•œ ëª¨í—˜ì´ ë  ìˆ˜ ìˆì„ê¹Œìš”? ìê°€ì£¼ì˜ ëˆˆìœ¼ë¡œ ë³¸ ì„¸ìƒì€ ì–´ë–¤ ëª¨ìŠµì¼ê¹Œìš”?",
                        prediction: [
                            "ì œëª©ì˜ ì£¼ì¸ê³µ ì´ë¦„ì´ ì£¼ëŠ” ëŠë‚Œ",
                            "í‘œì§€ì—ì„œ ëŠê»´ì§€ëŠ” ì´ì•¼ê¸° ë¶„ìœ„ê¸°",
                            "ë‚˜ì˜ ì¼ìƒ ì† íŠ¹ë³„í•œ ìˆœê°„ë“¤"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ìê°€ì£¼ëŠ” ì–´ë–¤ ì„±ê²©ì˜ ì•„ì´ì¸ê°€ìš”?",
                            "ìê°€ì£¼ì™€ ì¹œêµ¬ë“¤ ì‚¬ì´ì— ì¼ì–´ë‚œ ì‚¬ê±´ë“¤ì€?",
                            "ì–´ë¥¸ë“¤ì€ ìê°€ì£¼ë¥¼ ì–´ë–»ê²Œ ë°”ë¼ë³´ë‚˜ìš”?"
                        ],
                        interaction: [
                            "ìê°€ì£¼ì²˜ëŸ¼ ìƒìƒë ¥ì´ í’ë¶€í–ˆë˜ ìˆœê°„ì€?",
                            "ì¼ìƒì„ íŠ¹ë³„í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ì€?",
                            "ì¹œêµ¬ë“¤ê³¼ì˜ ì¶”ì–µ ì¤‘ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ê²ƒì€?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ì–´ë¦° ì‹œì ˆì˜ ìƒìƒë ¥ì´ ì£¼ëŠ” ì˜ë¯¸ëŠ”?",
                            "í‰ë²”í•œ ì¼ìƒì„ íŠ¹ë³„í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì€?",
                            "ë‚˜ë§Œì˜ ì´ì•¼ê¸°ë¥¼ ë§Œë“ ë‹¤ë©´?"
                        ],
                        worksheetUrl: "https://forms.gle/example9"
                    }
                }
            },
            {
                id: 10,
                title: "ê¹Œë§Œ ì•„ê¸° ì–‘",
                author: "ì—˜ë¦¬ìë² ìŠ¤ ì‡¼",
                emoji: "ğŸ‘",
                tags: ["ë‹¤ì–‘ì„±", "í¬ìš©", "ìì•„ì •ì²´ì„±"],
                grade: ["1-2í•™ë…„", "3-4í•™ë…„"],
                activities: {
                    before: {
                        storytelling: "í•˜ì–€ ì–‘ë“¤ ì‚¬ì´ì— íƒœì–´ë‚œ ê¹Œë§Œ ì•„ê¸° ì–‘. ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì€ ì•½ì ì¼ê¹Œìš”, ì•„ë‹ˆë©´ íŠ¹ë³„í•¨ì¼ê¹Œìš”?",
                        prediction: [
                            "í‘œì§€ì˜ ê¹Œë§Œ ì–‘ì´ ëŠë¼ëŠ” ê°ì • ì¶”ì¸¡í•˜ê¸°",
                            "'ë‹¤ë¥´ë‹¤'ëŠ” ê²ƒì˜ ì˜ë¯¸ ìƒê°í•˜ê¸°",
                            "ë‚˜ì™€ ë‹¤ë¥¸ ì¹œêµ¬ë¥¼ ëŒ€í•˜ëŠ” ë°©ë²•"
                        ]
                    },
                    during: {
                        factCheck: [
                            "ê¹Œë§Œ ì•„ê¸° ì–‘ì€ ì–´ë–¤ ì¼ì„ ê²ªì—ˆë‚˜ìš”?",
                            "ë‹¤ë¥¸ ì–‘ë“¤ì˜ ë°˜ì‘ì€ ì–´ë– í–ˆë‚˜ìš”?",
                            "ê¹Œë§Œ ì–‘ì´ íŠ¹ë³„í•´ì§„ ì´ìœ ëŠ”?"
                        ],
                        interaction: [
                            "ë‹¤ë¥´ë‹¤ê³  ëŠê¼ˆë˜ ìˆœê°„ì´ ìˆë‚˜ìš”?",
                            "ì°¨ì´ë¥¼ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ëŠ” ë°©ë²•ì€?",
                            "ë‚˜ë§Œì˜ íŠ¹ë³„í•¨ì€ ë¬´ì—‡ì¸ê°€ìš”?"
                        ]
                    },
                    after: {
                        reflection: [
                            "ë‹¤ì–‘ì„±ì´ ìš°ë¦¬ ì‚¬íšŒì— ì£¼ëŠ” ì˜ë¯¸ëŠ”?",
                            "ì„œë¡œ ë‹¤ë¦„ì„ ì¸ì •í•˜ëŠ” ê²ƒì´ ì™œ ì¤‘ìš”í• ê¹Œìš”?",
                            "ë‚˜ì™€ ë‹¤ë¥¸ ì‚¬ëŒì„ ì´í•´í•˜ëŠ” ë°©ë²•ì€?"
                        ],
                        worksheetUrl: "https://forms.gle/example10"
                    }
                }
            }
        ];

        // ============ ì „ì—­ ë³€ìˆ˜ ============
        let currentBooks = [...booksData];
        let selectedTags = [];

        // ============ ì´ˆê¸°í™” í•¨ìˆ˜ ============
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            renderBooks(booksData);
            renderFilterTags();
            updateStats();
            
            // ì—”í„°í‚¤ ê²€ìƒ‰ ì´ë²¤íŠ¸
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchBooks();
                }
            });
        }

        // ============ í†µê³„ ì—…ë°ì´íŠ¸ ============
        function updateStats() {
            document.getElementById('totalBooks').textContent = currentBooks.length;
            
            const allTags = new Set();
            currentBooks.forEach(book => {
                book.tags.forEach(tag => allTags.add(tag));
            });
            document.getElementById('totalTags').textContent = allTags.size;
            
            const totalActivities = currentBooks.reduce((sum, book) => {
                const beforeCount = 2; // storytelling + prediction
                const duringCount = 2; // factCheck + interaction
                const afterCount = 2;  // reflection + worksheet
                return sum + beforeCount + duringCount + afterCount;
            }, 0);
            document.getElementById('totalActivities').textContent = totalActivities;
        }

        // ============ í•„í„° íƒœê·¸ ë Œë”ë§ ============
        function renderFilterTags() {
            const allTags = new Set();
            booksData.forEach(book => {
                book.tags.forEach(tag => allTags.add(tag));
            });
            
            const filterContainer = document.getElementById('filterTags');
            filterContainer.innerHTML = '';
            
            Array.from(allTags).sort().forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'filter-tag';
                tagElement.textContent = `#${tag}`;
                tagElement.onclick = () => toggleTag(tag, tagElement);
                filterContainer.appendChild(tagElement);
            });
        }

        // ============ íƒœê·¸ í•„í„°ë§ ============
        function toggleTag(tag, element) {
            element.classList.toggle('active');
            
            if (selectedTags.includes(tag)) {
                selectedTags = selectedTags.filter(t => t !== tag);
            } else {
                selectedTags.push(tag);
            }
            
            filterBooks();
        }

        function filterBooks() {
            if (selectedTags.length === 0) {
                currentBooks = [...booksData];
            } else {
                currentBooks = booksData.filter(book => 
                    selectedTags.some(tag => book.tags.includes(tag))
                );
            }
            
            renderBooks(currentBooks);
            updateStats();
        }

        // ============ ê²€ìƒ‰ ê¸°ëŠ¥ ============
        function searchBooks() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm === '') {
                currentBooks = [...booksData];
            } else {
                currentBooks = booksData.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                );
            }
            
            renderBooks(currentBooks);
            updateStats();
        }

        function resetFilter() {
            document.getElementById('searchInput').value = '';
            selectedTags = [];
            currentBooks = [...booksData];
            
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            
            renderBooks(currentBooks);
            updateStats();
        }

        // ============ ê·¸ë¦¼ì±… ì¹´ë“œ ë Œë”ë§ ============
        function renderBooks(books) {
            const grid = document.getElementById('booksGrid');
            
            if (books.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: white;">
                        <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ“š</div>
                        <h3>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë‚˜ í•„í„°ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = books.map(book => `
                <div class="book-card fade-in">
                    <div class="book-cover" onclick="openModal(${book.id})">
                        <div class="book-cover-emoji">${book.emoji || 'ğŸ“–'}</div>
                    </div>
                    <div class="book-info">
                        <div class="book-title">${book.title}</div>
                        <div class="book-author">${book.author}</div>
                        <div class="book-tags">
                            ${book.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                        </div>
                        <div class="book-actions">
                            <button class="action-btn" onclick="openModal(${book.id})">
                                ğŸ“– ìì„¸íˆ
                            </button>
                            <button class="action-btn" onclick="openWorksheet('${book.activities.after.worksheetUrl}')">
                                ğŸ“ í•™ìŠµì§€
                            </button>
                            <button class="action-btn" onclick="shareBook(${book.id})">
                                ğŸ”— ê³µìœ 
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ============ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ ============
        function openModal(bookId) {
            const book = booksData.find(b => b.id === bookId);
            if (!book) return;
            
            document.getElementById('modalTitle').textContent = book.title;
            document.getElementById('modalAuthor').textContent = `${book.author} | ${book.grade ? book.grade.join(', ') : 'ì „í•™ë…„'}`;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <!-- ì½ê¸° ì „ í™œë™ -->
                <div class="activity-section">
                    <div class="activity-title">
                        <div class="activity-icon">ğŸ¯</div>
                        ì½ê¸° ì „ í™œë™
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸ“– ìŠ¤í† ë¦¬í…”ë§</h4>
                        <p>${book.activities.before.storytelling}</p>
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸ”® ë‚´ìš© ì˜ˆìƒí•˜ê¸°</h4>
                        <ul style="list-style: none; padding: 0;">
                            ${book.activities.before.prediction.map(item => 
                                `<li style="padding: 8px 0;">âœ“ ${item}</li>`
                            ).join('')}
                        </ul>
                    </div>
                </div>

                <!-- ì½ê¸° ì¤‘ í™œë™ -->
                <div class="activity-section">
                    <div class="activity-title">
                        <div class="activity-icon">ğŸ“š</div>
                        ì½ê¸° ì¤‘ í™œë™
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸ” ì‚¬ì‹¤í™•ì¸ ì§ˆë¬¸</h4>
                        ${book.activities.during.factCheck.map(q => `
                            <div class="question-box">
                                <div class="question-type">ì‚¬ì‹¤í™•ì¸</div>
                                ${q}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸ’¬ ìƒí˜¸êµë¥˜ ì§ˆë¬¸</h4>
                        ${book.activities.during.interaction.map(q => `
                            <div class="question-box">
                                <div class="question-type">ìƒí˜¸êµë¥˜</div>
                                ${q}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- ì½ê¸° í›„ í™œë™ -->
                <div class="activity-section">
                    <div class="activity-title">
                        <div class="activity-icon">âœ¨</div>
                        ì½ê¸° í›„ í™œë™
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸŒŸ ì„±ì°° ì§ˆë¬¸</h4>
                        ${book.activities.after.reflection.map(q => `
                            <div class="question-box">
                                <div class="question-type">ì„±ì°°</div>
                                ${q}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="activity-content">
                        <h4>ğŸ“ ë…í›„ í™œë™</h4>
                        <p>í•™ìƒë“¤ì˜ ìƒê°ì„ ì •ë¦¬í•˜ê³  ì°½ì˜ì ì¸ í™œë™ì„ í•  ìˆ˜ ìˆëŠ” í•™ìŠµì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                        <a href="${book.activities.after.worksheetUrl}" target="_blank" class="worksheet-btn">
                            ğŸ“ ì›¹ í•™ìŠµì§€ ë°”ë¡œê°€ê¸° â†’
                        </a>
                    </div>
                </div>

                <!-- ì¶”ê°€ ì•¡ì…˜ ë²„íŠ¼ -->
                <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #f0f0f0; display: flex; gap: 10px;">
                    <button class="btn" onclick="printLesson(${book.id})">ğŸ–¨ï¸ ìˆ˜ì—…ì•ˆ ì¸ì‡„</button>
                    <button class="btn" onclick="exportLesson(${book.id})">ğŸ’¾ ìˆ˜ì—…ì•ˆ ì €ì¥</button>
                    <button class="btn" onclick="shareBook(${book.id})">ğŸ”— ë§í¬ ê³µìœ </button>
                </div>
            `;
            
            document.getElementById('bookModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('bookModal').classList.remove('active');
        }

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        document.getElementById('bookModal').addEventListener('click', function(e) {
            if (e.target === document.getElementById('bookModal')) {
                closeModal();
            }
        });

        // ============ FAB ë©”ë‰´ ============
        function toggleFabMenu() {
            document.getElementById('fabMenu').classList.toggle('active');
        }

        // ============ ì¶”ê°€ ê¸°ëŠ¥ë“¤ ============
        function openWorksheet(url) {
            if (url.startsWith('http')) {
                window.open(url, '_blank');
            } else {
                alert('í•™ìŠµì§€ ë§í¬ë¥¼ Google Forms ë§í¬ë¡œ êµì²´í•´ì£¼ì„¸ìš”.');
            }
        }

        function shareBook(bookId) {
            const book = booksData.find(b => b.id === bookId);
            const shareUrl = `${window.location.href}#book-${bookId}`;
            const shareText = `ğŸ“š ${book.title} - ê·¸ë¦¼ì±… ìˆ˜ì—… ìë£Œ\nì‘ê°€: ${book.author}\n`;
            
            if (navigator.share) {
                navigator.share({
                    title: book.title,
                    text: shareText,
                    url: shareUrl
                });
            } else {
                // í´ë¦½ë³´ë“œì— ë³µì‚¬
                const tempInput = document.createElement('input');
                tempInput.value = shareUrl;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        function printLesson(bookId) {
            const book = booksData.find(b => b.id === bookId);
            const printWindow = window.open('', '_blank');
            
            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${book.title} - ìˆ˜ì—…ì•ˆ</title>
                    <style>
                        body { 
                            font-family: 'Malgun Gothic', sans-serif; 
                            line-height: 1.8;
                            padding: 20px;
                        }
                        h1 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
                        h2 { color: #667eea; margin-top: 30px; }
                        .section { margin: 20px 0; }
                        .question { 
                            background: #f8f9fa; 
                            padding: 10px; 
                            margin: 10px 0;
                            border-left: 3px solid #667eea;
                        }
                        @media print { 
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <h1>ğŸ“š ${book.title}</h1>
                    <p>ì‘ê°€: ${book.author} | ëŒ€ìƒ: ${book.grade ? book.grade.join(', ') : 'ì „í•™ë…„'}</p>
                    
                    <h2>ì½ê¸° ì „ í™œë™</h2>
                    <div class="section">
                        <h3>ìŠ¤í† ë¦¬í…”ë§</h3>
                        <p>${book.activities.before.storytelling}</p>
                        <h3>ë‚´ìš© ì˜ˆìƒí•˜ê¸°</h3>
                        ${book.activities.before.prediction.map(p => `<div class="question">â€¢ ${p}</div>`).join('')}
                    </div>
                    
                    <h2>ì½ê¸° ì¤‘ í™œë™</h2>
                    <div class="section">
                        <h3>ì‚¬ì‹¤í™•ì¸ ì§ˆë¬¸</h3>
                        ${book.activities.during.factCheck.map(q => `<div class="question">${q}</div>`).join('')}
                        <h3>ìƒí˜¸êµë¥˜ ì§ˆë¬¸</h3>
                        ${book.activities.during.interaction.map(q => `<div class="question">${q}</div>`).join('')}
                    </div>
                    
                    <h2>ì½ê¸° í›„ í™œë™</h2>
                    <div class="section">
                        <h3>ì„±ì°° ì§ˆë¬¸</h3>
                        ${book.activities.after.reflection.map(q => `<div class="question">${q}</div>`).join('')}
                    </div>
                    
                    <button class="no-print" onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°</button>
                </body>
                </html>
            `;
            
            printWindow.document.write(printContent);
            printWindow.document.close();
        }

        function exportLesson(bookId) {
            const book = booksData.find(b => b.id === bookId);
            const dataStr = JSON.stringify(book, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportLink = document.createElement('a');
            exportLink.setAttribute('href', dataUri);
            exportLink.setAttribute('download', `${book.title}_ìˆ˜ì—…ì•ˆ.json`);
            document.body.appendChild(exportLink);
            exportLink.click();
            document.body.removeChild(exportLink);
        }

        function addNewBook() {
            alert(`
ğŸ“š ìƒˆ ê·¸ë¦¼ì±… ì¶”ê°€ ë°©ë²•:

1. GitHubì—ì„œ ì´ ì €ì¥ì†Œë¥¼ Forkí•˜ì„¸ìš”
2. data/books.js íŒŒì¼ì„ í¸ì§‘í•˜ì„¸ìš”
3. Pull Requestë¥¼ ë³´ë‚´ì£¼ì„¸ìš”

ë˜ëŠ”

ì§ì ‘ books.js íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ìƒˆ ê·¸ë¦¼ì±…ì„ ì¶”ê°€í•˜ì„¸ìš”.
            `);
        }

        function exportData() {
            const dataStr = JSON.stringify(booksData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportLink = document.createElement('a');
            exportLink.setAttribute('href', dataUri);
            exportLink.setAttribute('download', 'picturebook_hub_data.json');
            document.body.appendChild(exportLink);
            exportLink.click();
            document.body.removeChild(exportLink);
        }

        function printView() {
            window.print();
        }

        function openGitHub() {
            // plusiamì˜ GitHub Issues í˜ì´ì§€ë¡œ ì´ë™
            const githubUrl = 'https://github.com/plusiam/picturebook-hub/issues/new';
            const issueTitle = '[í”¼ë“œë°±] ';
            const issueBody = `
## í”¼ë“œë°± ì¢…ë¥˜
- [ ] ë²„ê·¸ ì‹ ê³ 
- [ ] ê¸°ëŠ¥ ì œì•ˆ
- [ ] ê·¸ë¦¼ì±… ì¶”ê°€ ìš”ì²­
- [ ] ê¸°íƒ€

## ìƒì„¸ ë‚´ìš©
(ì—¬ê¸°ì— í”¼ë“œë°±ì„ ì‘ì„±í•´ì£¼ì„¸ìš”)
            `;
            
            const url = `${githubUrl}?title=${encodeURIComponent(issueTitle)}&body=${encodeURIComponent(issueBody)}`;
            window.open(url, '_blank');
        }

        // ============ URL í•´ì‹œ ì²˜ë¦¬ (ì§ì ‘ ë§í¬) ============
        window.addEventListener('hashchange', handleHashChange);
        window.addEventListener('load', handleHashChange);

        function handleHashChange() {
            const hash = window.location.hash;
            if (hash.startsWith('#book-')) {
                const bookId = parseInt(hash.replace('#book-', ''));
                if (bookId) {
                    openModal(bookId);
                }
            }
        }
    </script>
</body>
</html>